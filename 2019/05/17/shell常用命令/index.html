<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>shell常用命令 | 灯泉星</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="header-banner">
    <h1 id="title-wrap">
      <a href="/" id="title">灯泉星</a>
    </h1>
    <p id="slogan-wrap">
      <a href="/" id="slogan">Suffering is good for you.</a>
    </p>
  </div>
  <div id="header-social">
    <ul class="list-inline text-center">
      
      <li>
          <a target="_blank" href="https://www.zhihu.com/people/">
                          <span class="fa-stack fa-lg">
                                <i class="iconfont icon-zhihu"></i>
                          </span>
          </a>
      </li>
      
      
      
      <li>
          <a target="_blank" href="https://github.com/">
                          <span class="fa-stack fa-lg">
                              <i class="iconfont icon-github"></i>
                          </span>
          </a>
      </li>
      
    </ul>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-shell常用命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/05/17/shell常用命令/" class="article-date">
  <time datetime="2019-05-17T08:28:06.000Z" itemprop="datePublished">2019-05-17</time>
</a>
  </div>
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      shell常用命令
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><h3 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h3><p>显示所有进程信息： <code>ps -A</code></p>
<p>显示指定用户信息： <code>ps -u [用户名]</code></p>
<p>显示所有进程信息，包括命令行： <code>ps -ef</code></p>
<p>ps组合grep： <code>ps -ef | grep [条件]</code></p>
<p>列出正在内存中的程序： <code>ps aux</code></p>
<p>列出类似程序树的程序显示：<code>ps -axjf</code></p>
<h3 id="crontab"><a href="#crontab" class="headerlink" title="crontab"></a>crontab</h3><p>增加定时命令：<code>crontab -e</code></p>
<p>定时命令格式：<code>crontab -e [分钟][小时][日期][月份][星期] [需要执行的命令]</code></p>
<p>(其中*表示任意，数字对应相应的单位)</p>
<p>示例(每天12点运行test.sh脚本)：<code>0 12 * * * sh test.sh</code></p>
<p>查看定时命令列表：<code>crontab -l</code></p>
<h3 id="mutt"><a href="#mutt" class="headerlink" title="mutt"></a>mutt</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"邮件内容123456"</span> | mutt -s <span class="string">"邮件标题测试邮件"</span>   -a /scripts/test.txt  <span class="built_in">test</span>@126.com</span><br></pre></td></tr></table></figure>
<h3 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h3><ol>
<li>-a ：将 binary 文件以 text 文件的方式搜寻数据</li>
<li>-c ：计算找到 ‘搜寻字符串’ 的次数</li>
<li>-i ：忽略大小写的不同，所以大小写视为相同</li>
<li>-n ：顺便输出行号</li>
<li>-v ：反向选择，亦即显示出没有 ‘搜寻字符串’ 内容的那一行</li>
<li>—color=auto ：可以将找到的关键词部分加上颜色的显示</li>
</ol>
<p>单字符匹配：<code>[字符范围]</code></p>
<p>单字符字符反向选择：<code>[^字符范围]</code></p>
<p>行首：<code>^需匹配字符</code></p>
<p>行尾：<code>需匹配字符$</code></p>
<p>任意一个字符：<code>.</code></p>
<p>重复0个或多个之前的字符：<code>需重复字符*</code></p>
<p>限定重复之前字符次数：<code>需重复字符\{次数\}</code></p>
<p>全目录查找字符串：<code>grep -R &quot;字符串&quot; [目录]</code></p>
<h3 id="comm"><a href="#comm" class="headerlink" title="comm"></a>comm</h3><ul>
<li>-1：不显示在第一个文件出现的内容；</li>
<li>-2：不显示在第二个文件中出现的内容；</li>
<li>-3：不显示同时在两个文件中都出现的内容。</li>
</ul>
<p>交集：<code>comm aaa.txt bbb.txt -1 -2</code></p>
<p>非交集：<code>comm aaa.txt bbb.txt -3 | sed &#39;s/^\t//&#39;</code></p>
<p>差集：<code>comm aaa.txt bbb.txt -2 -3</code></p>
<p>差集：<code>comm aaa.txt bbb.txt -1 -3</code></p>
<h3 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h3><ul>
<li>-c或—count: 在每列旁边显示该行重复出现的次数。</li>
<li>-d或—repeated: 仅显示重复出现的行列。</li>
<li>-f&lt;栏位&gt;或—skip-fields=&lt;栏位&gt;: 忽略比较指定的栏位。</li>
<li>-s&lt;字符位置&gt;或—skip-chars=&lt;字符位置&gt;: 忽略比较指定的字符。</li>
<li>-u或—unique: 仅显示出一次的行列。</li>
<li>-w&lt;字符位置&gt;或—check-chars=&lt;字符位置&gt;: 指定要比较的字符。</li>
</ul>
<h3 id="nohup"><a href="#nohup" class="headerlink" title="nohup"></a>nohup</h3><p>不间断运行：<code>nohup /root/start.sh &amp;</code></p>
<h3 id="cd"><a href="#cd" class="headerlink" title="cd -"></a>cd -</h3><p>进行两个目录之间的切换。</p>
<h3 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h3><p>统计文件行数。</p>
<h2 id="常用操作"><a href="#常用操作" class="headerlink" title="常用操作"></a>常用操作</h2><h3 id="查看磁盘空间"><a href="#查看磁盘空间" class="headerlink" title="查看磁盘空间"></a>查看磁盘空间</h3><p><code>df -lh</code>：整个磁盘空间</p>
<p><code>du --max-depth=1 -h</code>：目录文件磁盘占用</p>
<p><code>du -sh</code>：同上</p>
<p><code>du -h --max-depth=0</code>：同上</p>
<p><code>du -sh /root/sw</code>：可以指定目录，作用同上</p>
<h3 id="tmpfs内存文件挂载和使用"><a href="#tmpfs内存文件挂载和使用" class="headerlink" title="tmpfs内存文件挂载和使用"></a>tmpfs内存文件挂载和使用</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tmpfs /tmp      tmpfs</span><br><span class="line">defaults,nodev,nosuid,mode=1777                 0 0</span><br><span class="line">tmpfs /var/lock tmpfs defaults,nodev,nosuid,noexec,mode=1777,size=10m 0 0</span><br><span class="line">tmpfs /var/run  tmpfs defaults,nodev,nosuid,noexec,mode=0755,size=10m 0 0</span><br></pre></td></tr></table></figure>
<h3 id="双系统下为fedora扩展home目录分区大小"><a href="#双系统下为fedora扩展home目录分区大小" class="headerlink" title="双系统下为fedora扩展home目录分区大小"></a>双系统下为fedora扩展home目录分区大小</h3><ol>
<li>在windows下磁盘管理中，压缩可以腾出空间的盘，分出空闲的磁盘空间；</li>
<li>（以下都需要sudo）在fedora命令行中使用fdisk -l可以查看当前的磁盘分配情况；</li>
<li>输入<code>fdisk /dev/sda</code>；</li>
<li>输入n，新建分区；</li>
<li>输入分区号，回车默认就好（此处以12为例，根据实际情况调整）；</li>
<li>输入起始柱面，回车默认就好；</li>
<li>输入结束柱面，回车默认就好（默认即为分配所有剩余空间）；</li>
<li>输入w，保存更改；</li>
<li><code>reboot</code>，重启主机；</li>
<li>重启完成后，<code>pvcreate /dev/sda12</code>、<code>vgextend fedora /dev/sda12</code>（其中12与步骤5中对应）；</li>
<li><code>vgdisplay fedora</code>，记下Free PE数</li>
<li><code>lvextend -l +[Free PE数] /dev/fedora/home</code>，其中最后的路径根据实际情况修改;</li>
<li><code>resize2fs /dev/fedora/root</code>，扩展home挂载点；</li>
<li><code>df -h</code>，查看文件系统情况。</li>
</ol>
<h3 id="删除fedora旧内核"><a href="#删除fedora旧内核" class="headerlink" title="删除fedora旧内核"></a>删除fedora旧内核</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">rpm -qa | grep kernel <span class="comment">#查看系统中所存在的kernel</span></span><br><span class="line">uname -r <span class="comment">#查看当前使用kernel</span></span><br><span class="line">sudo yum remove kernel-*-4.8.6-300.fc25.x86_64 <span class="comment">#删除旧版本内核</span></span><br><span class="line">sudo grub2-mkconfig -o /boot/grub2/grub.cfg <span class="comment">#生成启动项列表</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      
    </footer>
  </div>
</article>

</section>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Quanxin Deng<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
  </div>
</body>
</html>